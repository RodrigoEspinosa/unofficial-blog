import{isValidElement as e,useRef as r,useState as t,useCallback as n,useEffect as c,createContext as s,useContext as u,createElement as i,cloneElement as a,Fragment as o}from"react";var l=e=>void 0===e,f=e=>null===e||l(e),d=e=>Array.isArray(e);const g=e=>"object"==typeof e;var h=e=>!f(e)&&!d(e)&&g(e),m=e=>h(e)&&e.nodeType===Node.ELEMENT_NODE;const v={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit"},p="undefined",b={BLUR:"blur",CHANGE:"change",INPUT:"input"},O="max",y="min",j="maxLength",R="minLength",x="pattern",S="required",E="validate",V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/,B=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/\\(\\)?/g,C=/[\d+]/g;var F=e=>!d(e)&&(w.test(e)||!V.test(e)),k=e=>{const r=[];return e.replace(B,(e,t,n,c)=>{r.push(n?c.replace(N,"$1"):t||e)}),r};function $(e,r,t){let n=-1;const c=F(r)?[r]:k(r),s=c.length,u=s-1;for(;++n<s;){const r=c[n];let s=t;if(n!==u){const t=e[r];s=h(t)||d(t)?t:isNaN(+c[n+1])?{}:[]}e[r]=s,e=e[r]}return e}var L=e=>Object.entries(e).reduce((e,[r,t])=>F(r)?Object.assign(Object.assign({},e),{[r]:t}):($(e,r,t),e),{}),A=(e,r,t)=>{const n=r.split(/[,[\].]+?/).filter(Boolean).reduce((e,r)=>f(e)?e:e[r],e);return l(n)||n===e?e[r]||t:n},P=(e,r)=>{for(const t in e)if(A(r,t)){const r=e[t];if(r){if(r.ref.focus){r.ref.focus();break}if(r.options){r.options[0].ref.focus();break}}}},D=(e,r)=>{m(e)&&e.removeEventListener&&(e.removeEventListener(b.INPUT,r),e.removeEventListener(b.CHANGE,r),e.removeEventListener(b.BLUR,r))},M=e=>"radio"===e.type,W=e=>"checkbox"===e.type;function T(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&T(e.parentNode)}var U=e=>h(e)&&!Object.keys(e).length;function I(e){return d(e)?e:k(e)}function z(e,r){return 1==r.length?e:function(e,r){const t=F(r)?[r]:I(r),n=r.length;let c=0;for(;c<n;)e=l(e)?c++:e[t[c++]];return c==n?e:void 0}(e,function(e,r,t){let n=-1,c=e.length;r<0&&(r=-r>c?0:c+r),(t=t>c?c:t)<0&&(t+=c),c=r>t?0:t-r;const s=Array(c);for(;++n<c;)s[n]=e[n+r];return s}(r,0,-1))}function H(e,r){return r.forEach(r=>{!function(e,r){const t=F(r)?[r]:I(r),n=z(e,t),c=t[t.length-1],s=!(null!=n)||delete n[c];let u=void 0;for(let r=0;r<t.slice(0,-1).length;r++){let n=-1,c=void 0;const s=t.slice(0,-(r+1)),i=s.length-1;for(r>0&&(u=e);++n<s.length;){const r=s[n];c=c?c[r]:e[r],i===n&&(h(c)&&U(c)||d(c)&&!c.filter(e=>h(e)&&!U(e)).length)&&(u?delete u[r]:delete e[r]),u=c}}}(e,r)}),e}const G={isValid:!1,value:""};var _=e=>d(e)?e.filter(Boolean).reduce((e,{ref:{checked:r,value:t}})=>r?{isValid:!0,value:t}:e,G):G,q=e=>[...e].filter(({selected:e})=>e).map(({value:e})=>e),J=e=>"file"===e.type,K=e=>"select-multiple"===e.type,Q=e=>""===e;const X={value:!1,isValid:!1},Y={value:!0,isValid:!0};var Z=e=>{if(d(e)){if(e.length>1){const r=e.filter(({ref:{checked:e}})=>e).map(({ref:{value:e}})=>e);return{value:r,isValid:!!r.length}}const{checked:r,value:t,attributes:n}=e[0].ref;return r?n&&!l(n.value)?l(t)||Q(t)?Y:{value:t,isValid:!0}:Y:X}return X};function ee(e,r){const{name:t,value:n}=r,c=e[t];return J(r)?r.files:M(r)?c?_(c.options).value:"":K(r)?q(r.options):W(r)?!!c&&Z(c.options).value:n}var re=e=>"string"==typeof e,te=(e,r)=>{const t={};for(const n in e)(l(r)||(re(r)?n.startsWith(r):d(r)?r.find(e=>n.startsWith(e)):r&&r.nest))&&(t[n]=ee(e,e[n].ref));return t},ne=(e,{type:r,types:t,message:n})=>h(e)&&e.type===r&&e.message===n&&((e={},r={})=>{const t=Object.entries(e),n=Object.keys(r);return t.length===n.length&&t.reduce((e,[t,n])=>!!e&&r[t]&&r[t]===n,!0)})(e.types,t);var ce=e=>e instanceof RegExp,se=e=>{return(e=>h(e)&&!ce(e))(e)?e:{value:e,message:""}},ue=e=>"function"==typeof e,ie=e=>"boolean"==typeof e,ae=r=>re(r)||h(r)&&e(r);function oe(e,r,t="validate"){if(ae(e)||ie(e)&&!e)return{type:t,message:ae(e)?e:"",ref:r}}var le=(e,r,t,n,c)=>{if(r){const r=t[e];return Object.assign(Object.assign({},r),{types:Object.assign(Object.assign({},r&&r.types?r.types:{}),{[n]:c||!0})})}return{}},fe=async(e,r,{ref:t,ref:{type:n,value:c,name:s},options:u,required:i,maxLength:a,minLength:o,min:l,max:d,pattern:g,validate:m})=>{var v;const p=e.current,b={},V=M(t),w=W(t),B=V||w,N=Q(c),C=le.bind(null,s,r,b),F=(e,n,c,u=j,i=R)=>{const a=e?n:c;if(b[s]=Object.assign({type:e?u:i,message:a,ref:t},C(e?u:i,a)),!r)return b};if(i&&(!V&&!w&&(N||f(c))||ie(c)&&!c||w&&!Z(u).isValid||V&&!_(u).isValid)){const{value:e,message:n}=ae(i)?{value:!!i,message:i}:se(i);if(e&&(b[s]=Object.assign({type:S,message:n,ref:B?null===(v=p[s].options)||void 0===v?void 0:v[0].ref:t},C(S,n)),!r))return b}if(!f(l)||!f(d)){let e,s;const{value:u,message:i}=se(d),{value:a,message:o}=se(l);if("number"===n||!n&&!isNaN(c)){const r=t.valueAsNumber||parseFloat(c);f(u)||(e=r>u),f(a)||(s=r<a)}else{const r=t.valueAsDate||new Date(c);re(u)&&(e=r>new Date(u)),re(a)&&(s=r<new Date(a))}if((e||s)&&(F(!!e,i,o,O,y),!r))return b}if(re(c)&&!N&&(a||o)){const{value:e,message:t}=se(a),{value:n,message:s}=se(o),u=c.toString().length,i=!f(e)&&u>e,l=!f(n)&&u<n;if((i||l)&&(F(!!i,t,s),!r))return b}if(g&&!N){const{value:e,message:n}=se(g);if(ce(e)&&!e.test(c)&&(b[s]=Object.assign({type:x,message:n,ref:t},C(x,n)),!r))return b}if(m){const e=ee(p,t),n=B&&u?u[0].ref:t;if(ue(m)){const t=oe(await m(e),n);if(t&&(b[s]=Object.assign(Object.assign({},t),C(E,t.message)),!r))return b}else if(h(m)){let t={};for(const[c,u]of Object.entries(m)){if(!U(t)&&!r)break;const i=oe(await u(e),n,c);i&&(t=Object.assign(Object.assign({},i),C(c,i.message)),r&&(b[s]=t))}if(!U(t)&&(b[s]=Object.assign({ref:n},t),!r))return b}}return b};const de=(e,r)=>d(e.inner)?e.inner.reduce((e,{path:t,message:n,type:c})=>Object.assign(Object.assign({},e),e[t]&&r?{[t]:le(t,r,e,c,n)}:{[t]:e[t]||Object.assign({message:n,type:c},r?{types:{[c]:n||!0}}:{})}),{}):{[e.path]:{message:e.message,type:e.type}};async function ge(e,r,t,n,c){if(n)return n(t,c);try{return{values:await e.validate(t,{abortEarly:!1,context:c}),errors:{}}}catch(e){return{values:{},errors:L(de(e,r))}}}var he=e=>f(e)||!g(e);const me=(e,r)=>{const t=(r,t,n)=>{const c=n?`${e}.${t}`:`${e}[${t}]`;return he(r)?c:me(c,r)};return d(r)?r.map((e,r)=>t(e,r)):Object.entries(r).map(([e,r])=>t(r,e,!0))};var ve=(e,r,t,n)=>{let c;return t.add(r),U(e)?c=void 0:l(e[r])?(c=A(L(e),r),l(c)||((e,r)=>me(e,r).flat(1/0))(r,c).forEach(e=>t.add(e))):(c=e[r],t.add(r)),l(c)?h(n)?A(n,r):n:c},pe=({isOnChange:e,hasError:r,isBlurEvent:t,isOnSubmit:n,isReValidateOnSubmit:c,isOnBlur:s,isReValidateOnBlur:u,isSubmitted:i})=>e&&t||n&&c||n&&!i||s&&!t&&!r||u&&!t&&r||c&&i,be=e=>e.substring(0,e.indexOf("[")),Oe=(e,r)=>{const t=L(te(e));return r?A(t,r,t):t};function ye(e,r){let t=!1;if(!d(e)||!d(r)||e.length!==r.length)return!0;for(let n=0;n<e.length&&!t;n++){const c=e[n],s=r[n];if(l(s)||Object.keys(c).length!==Object.keys(s).length){t=!0;break}for(const e in c)if(c[e]!==s[e]){t=!0;break}}return t}const je=(e,r)=>RegExp(`^${r}[\\d+]`.replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e);var Re=(e,r)=>[...e].reduce((e,t)=>!!je(r,t)||e,!1),xe=e=>typeof FileList!==p&&e instanceof FileList;var Se=e=>({isOnSubmit:!e||e===v.onSubmit,isOnBlur:e===v.onBlur,isOnChange:e===v.onChange}),Ee=e=>M(e)||W(e);function Ve({mode:e=v.onSubmit,reValidateMode:s=v.onChange,validationSchema:u,validationResolver:i,validationContext:a,defaultValues:o={},submitFocusError:g=!0,validateCriteriaMode:O}={}){const y=r({}),j="all"===O,R=r({}),x=r({}),S=r({}),E=r(new Set),V=r(new Set),w=r(new Set),B=r(new Set),N=r(!0),C=r({}),F=r(o),k=r(!1),I=r(!1),z=r(!1),G=r(!1),_=r(0),q=r(!1),Q=r(),X=r({}),Y=r(a),Z=r(new Set),[,ce]=t(),{isOnBlur:se,isOnSubmit:ae,isOnChange:oe}=r(Se(e)).current,le=typeof window===p,de=!(!u&&!i),me=typeof document!==p&&!le&&!l(window.HTMLElement),je=me?"Proxy"in window:typeof Proxy!==p,Ve=r({dirty:!je,dirtyFields:!je,isSubmitted:ae,submitCount:!je,touched:!je,isSubmitting:!je,isValid:!je}),{isOnBlur:we,isOnSubmit:Be}=r(Se(s)).current;Y.current=a;const Ne=n(()=>{k.current||ce({})},[]),Ce=n((e,r,t,n)=>{let c=t||function({errors:e,name:r,error:t,validFields:n,fieldsWithValidation:c}){const s=U(t),u=U(e),i=A(t,r),a=A(e,r);return!(s&&n.has(r)||a&&a.isManual)&&(!!(u!==s||!u&&!a||s&&c.has(r)&&!n.has(r))||i&&!ne(a,i))}({errors:R.current,error:r,name:e,validFields:B.current,fieldsWithValidation:w.current});if(U(r)?((w.current.has(e)||de)&&(B.current.add(e),c=c||A(R.current,e)),R.current=H(R.current,[e])):(B.current.delete(e),c=c||!A(R.current,e),$(R.current,e,r[e])),c&&!n)return Ne(),!0},[Ne,de]),Fe=n((e,r)=>{const t=e.ref,n=e.options,{type:c}=t,s=me&&m(t)&&f(r)?"":r;return M(t)&&n?n.forEach(({ref:e})=>e.checked=e.value===s):J(t)?xe(s)?t.files=s:t.value=s:K(t)?[...t.options].forEach(e=>e.selected=s.includes(e.value)):W(t)&&n?n.length>1?n.forEach(({ref:e})=>e.checked=s.includes(e.value)):n[0].ref.checked=!!s:t.value=s,!!c},[me]),ke=e=>{if(!y.current[e]||!Ve.current.dirty&&!Ve.current.dirtyFields)return!1;const r=Re(Z.current,e),t=V.current.size;let n=C.current[e]!==ee(y.current,y.current[e].ref);if(r){const r=be(e);n=ye(Oe(y.current,r),A(F.current,r))}const c=(r?G.current:V.current.has(e))!==n;return n?V.current.add(e):V.current.delete(e),G.current=r?n:!!V.current.size,Ve.current.dirty?c:t!==V.current.size},$e=n(e=>{if(ke(e)||!A(x.current,e)&&Ve.current.touched)return!!$(x.current,e,!0)},[]),Le=n((e,r,t)=>{const n=d(r);for(const c in r){const s=`${t||e}${n?`[${c}]`:`.${c}`}`;h(r[c])&&Le(e,r[c],s);const u=y.current[s];u&&(Fe(u,r[c]),$e(s))}},[Fe,$e]),Ae=n((e,r)=>{const t=y.current[e];if(t){Fe(t,r);const n=$e(e);if(ie(n))return n}else he(r)||Le(e,r)},[$e,Fe,Le]),Pe=n(async(e,r)=>{const t=y.current[e];if(!t)return!1;const n=await fe(y,j,t);return Ce(e,n,!1,r),U(n)},[Ce,j]),De=n(async e=>{const{errors:r}=await ge(u,j,Oe(y.current),i,Y.current),t=N.current;return N.current=U(r),d(e)?(e.forEach(e=>{const t=A(r,e);t?$(R.current,e,t):H(R.current,[e])}),Ne()):Ce(e,A(r,e)?{[e]:A(r,e)}:{},t!==N.current),U(R.current)},[Ne,Ce,j,i,u]),Me=n(async e=>{const r=e||Object.keys(y.current);if(de)return De(r);if(d(r)){const e=await Promise.all(r.map(async e=>await Pe(e,!0)));return Ne(),e.every(Boolean)}return await Pe(r)},[De,Pe,Ne,de]),We=e=>I.current||E.current.has(e)||E.current.has((e.match(/\w+/)||[])[0]);Q.current=Q.current?Q.current:async({type:e,target:r})=>{const t=r?r.name:"",n=y.current,c=R.current,s=n[t],a=A(c,t);let o;if(!s)return;const l=e===b.BLUR,f=pe({hasError:!!a,isOnChange:oe,isBlurEvent:l,isOnSubmit:ae,isReValidateOnSubmit:Be,isOnBlur:se,isReValidateOnBlur:we,isSubmitted:z.current}),d=ke(t);let g=We(t)||d;if(l&&!A(x.current,t)&&Ve.current.touched&&($(x.current,t,!0),g=!0),f)return g&&Ne();if(de){const{errors:e}=await ge(u,j,Oe(n),i,Y.current),r=N.current;N.current=U(e),o=A(e,t)?{[t]:A(e,t)}:{},r!==N.current&&(g=!0)}else o=await fe(y,j,s);!Ce(t,o)&&g&&Ne()};const Te=n((e={})=>{const r=U(F.current)?te(y.current):F.current;ge(u,j,L(Object.assign(Object.assign({},r),e)),i,Y.current).then(({errors:e})=>{const r=N.current;N.current=U(e),r!==N.current&&Ne()})},[Ne,j,i]),Ue=n((e,r)=>{!l(Q.current)&&e&&function(e,r,t,n){const{ref:c,ref:{name:s,type:u},mutationWatcher:i}=t;if(!u)return void delete e[s];const a=e[s];if((M(c)||W(c))&&a){const{options:t}=a;d(t)&&t.length?(t.filter(Boolean).forEach(({ref:e,mutationWatcher:c},s)=>{(e&&T(e)||n)&&(D(e,r),c&&c.disconnect(),H(t,[`[${s}]`]))}),t&&!t.filter(Boolean).length&&delete e[s]):delete e[s]}else(T(c)||n)&&(D(c,r),i&&i.disconnect(),delete e[s])}(y.current,Q.current,e,r)},[]),Ie=n((e,r)=>{if(!e||e&&Re(Z.current,e.ref.name)&&!r)return;Ue(e,r);const{name:t}=e.ref;R.current=H(R.current,[t]),x.current=H(x.current,[t]),C.current=H(C.current,[t]),[V,w,B,E].forEach(e=>e.current.delete(t)),(Ve.current.isValid||Ve.current.touched)&&(Ne(),de&&Te())},[Ne,de,Te,Ue]);const ze=({name:e,type:r,types:t,message:n,preventRender:c})=>{const s=y.current[e];ne(R.current[e],{type:r,message:n,types:t})||($(R.current,e,{type:r,types:t,message:n,ref:s?s.ref:{},isManual:!0}),c||Ne())};function He(e,r={}){if(!e.name)return console.warn("Missing name @",e);const{name:t,type:n,value:c}=e,s=Object.assign({ref:e},r),u=y.current,i=Ee(e);let a,o=u[t],f=!0,g=!1;if(i?o&&d(o.options)&&o.options.filter(Boolean).find(({ref:e})=>c===e.value):o)return void(u[t]=Object.assign(Object.assign({},o),r));if(n){const c=function(e,r){const t=new MutationObserver(()=>{T(e)&&(t.disconnect(),r())});return t.observe(window.document,{childList:!0,subtree:!0}),t}(e,()=>Ie(s));o=i?Object.assign({options:[...o&&o.options||[],{ref:e,mutationWatcher:c}],ref:{type:n,name:t}},r):Object.assign(Object.assign({},s),{mutationWatcher:c})}else o=s;if(u[t]=o,U(F.current)||(a=A(F.current,t),f=l(a),g=Re(Z.current,t),f||g||Fe(o,a)),de&&!g&&Ve.current.isValid?Te():U(r)||(w.current.add(t),!ae&&Ve.current.isValid&&fe(y,j,o).then(e=>{const r=N.current;U(e)?B.current.add(t):N.current=!1,r!==N.current&&Ne()})),C.current[t]||g&&f||(C.current[t]=f?ee(u,o.ref):a),!n)return;!function({field:{ref:e},handleChange:r,isRadioOrCheckbox:t}){m(e)&&r&&(e.addEventListener(t?b.CHANGE:b.INPUT,r),e.addEventListener(b.BLUR,r))}({field:i&&o.options?o.options[o.options.length-1]:o,isRadioOrCheckbox:i,handleChange:Q.current})}const Ge=n(e=>async r=>{r&&(r.preventDefault(),r.persist());let t={},n={};const c=y.current;Ve.current.isSubmitting&&(q.current=!0,Ne());try{if(de){n=te(c);const{errors:e,values:r}=await ge(u,j,L(n),i,Y.current);R.current=e,t=e,n=r}else for(const e of Object.values(c))if(e){const{ref:r,ref:{name:s}}=e,u=await fe(y,j,e);u[s]?($(t,s,u[s]),B.current.delete(s)):(w.current.has(s)&&B.current.add(s),n[s]=ee(c,r))}U(t)?(R.current={},await e(L(n),r)):(g&&me&&P(c,t),R.current=t)}finally{z.current=!0,q.current=!1,_.current=_.current+1,Ne()}},[me,Ne,de,g,j,i,u]);c(()=>()=>{k.current=!0,y.current&&"production"===process.env.NODE_ENV&&Object.values(y.current).forEach(e=>Ie(e,!0))},[Ie]),de||(N.current=B.current.size>=w.current.size&&U(R.current));const _e={dirty:G.current,dirtyFields:V.current,isSubmitted:z.current,submitCount:_.current,touched:x.current,isSubmitting:q.current,isValid:ae?z.current&&U(R.current):N.current},qe={triggerValidation:Me,setValue:n(function(e,r,t){let n=!1;const c=d(e);(c?e:[e]).forEach(e=>{const t=re(e);n=!(!Ae(t?e:Object.keys(e)[0],t?r:Object.values(e)[0])&&!c)||We(e)}),(n||c)&&Ne(),(t||c&&r)&&Me(c?void 0:e)},[Ne,Ae,Me]),register:n(function(e,r){if(!le)if(re(e))He({name:e},r);else{if(!(h(e)&&"name"in e))return r=>r&&He(r,e);He(e,r)}},[F.current,C.current]),unregister:n(function(e){U(y.current)||(d(e)?e:[e]).forEach(e=>Ie(y.current[e],!0))},[]),getValues:n(e=>{const r=te(y.current),t=U(r)?F.current:r;return e&&e.nest?L(t):t},[]),formState:je?new Proxy(_e,{get:(e,r)=>r in e?(Ve.current[r]=!0,e[r]):{}}):_e},Je=Object.assign(Object.assign(Object.assign({removeFieldEventListener:Ue,reRender:Ne},de?{validateSchemaIsValid:Te}:{}),{mode:{isOnBlur:se,isOnSubmit:ae,isOnChange:oe},reValidateMode:{isReValidateOnBlur:we,isReValidateOnSubmit:Be},errorsRef:R,touchedFieldsRef:x,fieldsRef:y,isWatchAllRef:I,watchFieldsRef:E,resetFieldArrayFunctionRef:X,fieldArrayDefaultValues:S,validFieldsRef:B,dirtyFieldsRef:V,fieldsWithValidationRef:w,fieldArrayNamesRef:Z,isDirtyRef:G,readFormStateRef:Ve,defaultValuesRef:F}),qe);return Object.assign({watch:function(e,r){const t=l(r)?l(F.current)?{}:F.current:r,n=te(y.current,e),c=E.current;if(re(e))return ve(n,e,c,t);if(d(e))return e.reduce((e,r)=>Object.assign(Object.assign({},e),{[r]:ve(n,r,c,t)}),{});I.current=!0;const s=!U(n)&&n||t;return e&&e.nest?L(s):s},control:Je,handleSubmit:Ge,reset:n((e,r={})=>{if(me)for(const e of Object.values(y.current))if(e){const{ref:r,options:t}=e,n=Ee(r)&&d(t)?t[0].ref:r;if(m(n))try{n.closest("form").reset();break}catch(e){}}e&&(F.current=e),Object.values(X.current).forEach(e=>ue(e)&&e()),(({errors:e,dirty:r,isSubmitted:t,touched:n,isValid:c,submitCount:s})=>{y.current={},e||(R.current={}),n||(x.current={}),c||(B.current=new Set,w.current=new Set,N.current=!0),r||(V.current=new Set,G.current=!1),t||(z.current=!1),s||(_.current=0),C.current={},S.current={},E.current=new Set,I.current=!1})(r),Ne()},[]),clearError:n(function(e){l(e)?R.current={}:H(R.current,d(e)?e:[e]),Ne()},[]),setError:n(function(e,r="",t){re(e)?ze(Object.assign({name:e},h(r)?{types:r,type:""}:{type:r,message:t})):d(e)&&(e.forEach(e=>ze(Object.assign(Object.assign({},e),{preventRender:!0}))),Ne())},[]),errors:R.current},qe)}function we(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)r.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(t[n[c]]=e[n[c]])}return t}const Be=s(null);function Ne(){return u(Be)}function Ce(e){var{children:r,formState:t,errors:n}=e,c=we(e,["children","formState","errors"]);return i(Be.Provider,{value:Object.assign(Object.assign({},c),{formState:t,errors:n})},r)}var Fe=()=>{const e=typeof performance===p?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)})};const ke=(e,r)=>Object.assign({[r]:Fe()},h(e)?e:{value:e}),$e=(e,r)=>(d(e)?e:[]).map(e=>ke(e,r));var Le=(e,r)=>l(r)?[]:d(r)?function(e,r){let t=-1;for(;++t<e.length;)r.indexOf(t)>=0&&delete e[t];return e.filter(Boolean)}(e,r):((e,r)=>[...e.slice(0,r),...e.slice(r+1)])(e,r),Ae=(e,r,t)=>d(e)?e.splice(t,0,e.splice(r,1)[0]):[],Pe=(e,r,t)=>{const n=[e[t],e[r]];e[r]=n[0],e[t]=n[1]};function De(e,r){return[...d(r)?r:[r||null],...e]}function Me(e,r,t){return[...e.slice(0,r),...d(t)?t:[t||null],...e.slice(r)]}var We=e=>d(e)?Array(e.length).fill(null):null;const Te=({control:e,name:s,keyName:u="id"})=>{const i=Ne(),{isWatchAllRef:a,resetFieldArrayFunctionRef:o,fieldArrayNamesRef:f,reRender:g,fieldsRef:h,getValues:m,defaultValuesRef:v,removeFieldEventListener:p,errorsRef:b,dirtyFieldsRef:O,isDirtyRef:y,touchedFieldsRef:j,readFormStateRef:R,watchFieldsRef:x,validFieldsRef:S,fieldsWithValidationRef:E,fieldArrayDefaultValues:V,validateSchemaIsValid:w}=e||i.control,B=()=>[...A(V.current[be(s)]?V.current:v.current,s,[])],N=r(B()),[k,$]=t($e(N.current,u)),[L,P]=t(!1),D=r(k),M=F(s);D.current=k,M&&(V.current[s]=N.current);const W=e=>e.map(e=>ke(e,u)),T=e=>{$(e),R.current.isValid&&w&&w({[s]:e})},U=({shouldRender:e,isRemove:r,isPrePend:t,index:n,value:c={}}={})=>{let u=e;const i=d(c)?c:[c];if(R.current.dirty){const e={};if(t||r)for(const r of[...O.current].sort())if(je(r,s)){const t=r.match(C);if(t){const n=+t[t.length-1];e[n]?e[n].push(r):e[n]=[r]}O.current.delete(r)}if(!l(n)||t){const r=l(n)?[]:((e,r,t=[],n=0,c=[])=>{for(const t of r)e.indexOf(t)<0&&c.push(t);for(const s of e.sort())r.indexOf(s)>-1?(t.push(-1),n++):t.push(s-n-(c.length?c.map(e=>e<s).filter(Boolean).length:0));return t})(Object.keys(e).map(e=>+e),d(n)?n:[n]);Object.values(e).forEach((e,n)=>{const c=t?0:r[n];if(c>-1)for(const r of e){const n=r.match(C);n&&O.current.add(r.replace(/[\d+]([^[\d+]+)$/,`${t?+n[n.length-1]+e.length:c}$1`))}})}r||(i.forEach((e,r)=>Object.keys(e).forEach(e=>O.current.add(`${s}[${t?r:D.current.length+r}].${e}`))),y.current=!0),u=!0}u&&!a.current&&g()},I=e=>{R.current.dirty&&(y.current=!!l(e)||ye(e,v.current[s]||[]));for(const e in h.current)je(e,s)&&h.current[e]&&p(h.current[e],!0)},z=()=>{const e=A(m({nest:!0}),s);if(d(e))for(let r=0;r<e.length;r++)D.current[r]=Object.assign(Object.assign({},D.current[r]),e[r])},H=()=>{I(),N.current=B(),$($e(N.current,u))};return c(()=>{M&&L&&V.current[s]&&k.length<V.current[s].length&&V.current[s].pop()},[k,s,V,L,M]),c(()=>{if(a&&a.current)g();else if(x)for(const e of x.current)if(e.startsWith(s)){g();break}},[k,s,g,x,a]),c(()=>{const e=o.current,r=f.current;return r.add(s),e[s]=H,()=>{I(),delete e[s],r.delete(s)}},[]),{swap:n((e,r)=>{z();const t=Oe(h.current,s);Pe(t,e,r),I(t),Pe(D.current,e,r),T([...D.current]),b.current[s]&&Pe(b.current[s],e,r),R.current.touched&&j.current[s]&&(Pe(j.current[s],e,r),g())},[s]),move:n((e,r)=>{z();const t=Oe(h.current,s);Ae(t,e,r),I(t),Ae(D.current,e,r),T([...D.current]),b.current[s]&&Ae(b.current[s],e,r),R.current.touched&&j.current[s]&&(Ae(j.current[s],e,r),g())},[s]),prepend:n(e=>{let r=!1;I(),T(De(D.current,d(e)?W(e):[ke(e,u)])),b.current[s]&&(b.current[s]=De(b.current[s],We(e))),R.current.touched&&j.current[s]&&(j.current[s]=De(j.current[s],We(e)),r=!0),U({shouldRender:r,isPrePend:!0,value:e})},[s]),append:n(e=>{T([...D.current,...d(e)?W(e):[ke(e,u)]]),U({value:e})},[s]),remove:n(e=>{let r=!1;if(l(e)||z(),I(Le(Oe(h.current,s),e)),T(Le(D.current,e)),P(!0),b.current[s]&&(b.current[s]=Le(b.current[s],e),b.current[s].filter(Boolean).length||delete b.current[s]),R.current.touched&&j.current[s]&&(j.current[s]=Le(j.current[s],e),r=!0),R.current.isValid&&!w){let r=-1,t=!1;const n=l(e);for(;r++<k.length;){const c=r===k.length-1,u=(d(e)?e:[e]).indexOf(r)>=0;if((u||n)&&(t=!0),t)for(const e in k[r]){const t=`${s}[${r}].${e}`;if(u||c||n)S.current.delete(t),E.current.delete(t);else{const n=`${s}[${r-1}].${e}`;S.current.has(t)&&S.current.add(n),E.current.has(t)&&E.current.add(n)}}}}U({shouldRender:r,isRemove:!0,index:e})},[k,s]),insert:n((e,r)=>{z(),I(Me(Oe(h.current,s),e)),T(Me(D.current,e,d(r)?W(r):[ke(r,u)])),b.current[s]&&(b.current[s]=Me(b.current[s],e,We(r))),R.current.touched&&j.current[s]&&(j.current[s]=Me(j.current[s],e,We(r)),g())},[s]),fields:k}};const Ue=s=>{var{name:u,rules:o,as:f,onBlur:d,onChange:g,onChangeName:m=v.onChange,onBlurName:p=v.onBlur,valueName:b,defaultValue:O,control:y,onFocus:j}=s,R=we(s,["name","rules","as","onBlur","onChange","onChangeName","onBlurName","valueName","defaultValue","control","onFocus"]);const x=Ne(),{defaultValuesRef:S,setValue:E,register:V,unregister:w,errorsRef:B,removeFieldEventListener:N,triggerValidation:C,mode:{isOnSubmit:F,isOnBlur:k,isOnChange:$},reValidateMode:{isReValidateOnBlur:L,isReValidateOnSubmit:P},formState:{isSubmitted:D},fieldsRef:M,fieldArrayNamesRef:W}=y||x.control,[T,U]=t(l(O)?A(S.current,u):O),I=r(T),z=ie(T),H=k||L,G=r(o);G.current=o;const _=()=>!pe({hasError:!!A(B.current,u),isOnBlur:k,isOnSubmit:F,isOnChange:$,isReValidateOnBlur:L,isReValidateOnSubmit:P,isSubmitted:D}),q=e=>{const r=((e,r)=>he(e)||!h(e.target)||h(e.target)&&!e.type?e:r||l(e.target.value)?e.target.checked:e.target.value)(e,z);return U(r),I.current=r,r},J=n(()=>{Re(W.current,u)&&M.current[u]&&N(M.current[u],!0),V(Object.defineProperty({name:u,focus:j},"value",{set(e){U(e),I.current=e},get:()=>I.current}),G.current)},[W,M,G,u,j,V,N]);c(()=>{const e=W.current;return J(),()=>{Re(e,u)||w(u)}},[u,w,W,J]),c(()=>{J()},[J]),c(()=>{M.current[u]||(J(),U(l(O)?A(S.current,u):O))});const K=Object.assign(Object.assign(Object.assign(Object.assign({name:u},R),g?{[m]:(e=>(...r)=>E(u,q(e(r)),_()))(g)}:{[m]:e=>{const r=q(e);E(u,r,_())}}),d||H?{[p]:(...e)=>{d&&d(e),H&&C(u)}}:{}),{[b||(z?"checked":"value")]:T});return e(f)?a(f,K):i(f,K)},Ie=r=>{var{as:t,errors:n,name:c,message:s,children:u}=r,l=we(r,["as","errors","name","message","children"]);const f=Ne(),d=A(n||f.errors,c);if(!d)return null;const{message:g,types:h}=d,m=Object.assign(Object.assign({},t?l:{}),{children:u?u({message:g||s,messages:h}):g||s});return t?e(t)?a(t,m):i(t,m):i(o,Object.assign({},m))};export{Ue as Controller,Ie as ErrorMessage,Ce as FormContext,Te as useFieldArray,Ve as useForm,Ne as useFormContext};
